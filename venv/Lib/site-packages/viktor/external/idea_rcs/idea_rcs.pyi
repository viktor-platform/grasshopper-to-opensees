import abc
import json
import xml.etree.ElementTree as ET
from ...core import File
from ..external_program import ExternalProgram
from .objects import BarSurface, CalculationSetup, CheckMember, CheckMember1D, CheckSection, CheckSectionExtreme, CodeSettings, ConcAggregateType, ConcCementClass, ConcDependentParams, ConcDiagramType, ConcreteMaterial, CrossSection, CrossSectionComponent, CrossSectionParameter, CrossSectionType, ExposureClassesDataEc2, FatigueLoading, LoadingSLS, LoadingULS, MatConcrete, MatConcreteEc2, MatReinforcement, MatReinforcementEc2, MemberType, ProjectData, ReinfClass, ReinfDiagramType, ReinfFabrication, ReinfType, ReinforcedBar, ReinforcedCrossSection, ReinforcementMaterial, Stirrup, ThermalState, TwoWaySlabType
from _typeshed import Incomplete
from abc import ABC, abstractmethod
from io import BytesIO, StringIO
from typing import Any, BinaryIO, Iterator, Sequence

__all__ = ['Beam', 'CompressionMember', 'GeneralShape', 'IdeaRcsAnalysis', 'Model', 'OneWaySlab', 'OpenModel', 'OutputFileParser', 'RcsOutputFileParser', 'RectSection', 'SectionPrototype1D']

class IdeaRcsAnalysis(ExternalProgram):
    input_file: Incomplete
    def __init__(self, input_file: BytesIO | File, *, return_result_xml: bool = None, return_rcs_file: bool = None) -> None: ...
    def get_output_file(self, *, as_file: bool = False) -> BytesIO | File | None: ...
    def get_idea_rcs_file(self, *, as_file: bool = False) -> BytesIO | File | None: ...

class _Model:
    def __init__(self, project_data: ProjectData = None, code_settings: CodeSettings = None) -> None: ...
    @property
    def project_data(self) -> ProjectData: ...
    @property
    def code_settings(self) -> CodeSettings: ...
    def generate_xml_input(self, *, as_file: bool = False) -> BytesIO | File: ...

class _EnumEncoder(json.JSONEncoder):
    def default(self, o: Any) -> Any: ...

class OpenModel(_Model):
    def __init__(self, *, project_data: ProjectData = None, code_settings: CodeSettings = None) -> None: ...
    def create_matconcrete_ec2(self, base_material: ConcreteMaterial, name: str = None, *, e_modulus: float = 32800, g_modulus: float = 13667, poisson: float = 0.2, unit_mass: float = 2500, specific_heat: float = 0.6, thermal_expansion: float = 1e-05, thermal_conductivity: float = 45, is_default: bool = False, order_in_code: int = 1, thermal_state: ThermalState = None, fck_28: float = None, stone_diameter: float = 0.016, cement_class: ConcCementClass = ..., aggregate_type: ConcAggregateType = ..., diagram_type: ConcDiagramType = ..., silica_fume: bool = False, plain_concrete_diagram: bool = False, dep_params: ConcDependentParams = None) -> MatConcreteEc2: ...
    def create_matreinforcement_ec2(self, base_material: ReinforcementMaterial, name: str = None, *, e_modulus: float = 200000, g_modulus: float = 83333, poisson: float = 0.2, unit_mass: float = 7850, specific_heat: float = 0.6, thermal_expansion: float = 1e-05, thermal_conductivity: float = 45, is_default: bool = False, order_in_code: int = 1, thermal_state: ThermalState = None, bar_surface: BarSurface = ..., fyk: float = None, ftk_by_fyk: float = None, epsuk: float = None, ftk: float = None, class_: ReinfClass = ..., type_: ReinfType = ..., fabrication: ReinfFabrication = ..., diagram_type: ReinfDiagramType = ...) -> MatReinforcementEc2: ...
    def create_cross_section_component(self, name: str = None) -> CrossSectionComponent: ...
    def create_cross_section_parameter(self, cross_section_type: CrossSectionType, material: MatConcrete, name: str = None, **parameters: Any) -> CrossSectionParameter: ...
    def create_reinforced_cross_section(self, cross_section: CrossSection, name: str = None) -> ReinforcedCrossSection: ...
    def create_check_member1d(self, name: str = None) -> CheckMember1D: ...
    def add_check_section(self, check_member: CheckMember, reinf_section: ReinforcedCrossSection, description: str = None) -> CheckSection: ...
    def add_member_data_ec2(self, member: CheckMember, member_type: MemberType, two_way_slab_type: TwoWaySlabType, *, calculation_setup: CalculationSetup = None, coeff_kx_for_wmax: float = None, exposure_class_data: ExposureClassesDataEc2 = None, creep_coefficient: float = None, relative_humidity: float = None) -> None: ...

class _SectionPrototype(ABC, metaclass=abc.ABCMeta):
    @abstractmethod
    def __init__(self): ...

class SectionPrototype1D(_SectionPrototype, ABC, metaclass=abc.ABCMeta):
    @abstractmethod
    def __init__(self): ...

class RectSection(SectionPrototype1D):
    def __init__(self, width: float, height: float) -> None: ...

class GeneralShape(SectionPrototype1D):
    def __init__(self, outline: Sequence[tuple[float, float]], *, openings: Sequence[Sequence[tuple[float, float]]] = None) -> None: ...

class _SectionPrototype2D(_SectionPrototype, ABC, metaclass=abc.ABCMeta):
    @abstractmethod
    def __init__(self, thickness: float): ...

class Member:
    def __init__(self, rcs: ReinforcedCrossSection, check_section: CheckSection) -> None: ...
    @property
    def bars(self) -> list[ReinforcedBar]: ...
    @property
    def stirrups(self) -> list[Stirrup]: ...
    @property
    def extremes(self) -> list[CheckSectionExtreme]: ...
    def create_bar(self, coordinates: tuple[float, float], diameter: float, material: MatReinforcement) -> None: ...
    def create_bar_layer(self, *, origin: tuple[float, float], diameter: float, material: MatReinforcement, number_of_bars: int, delta_y: float = None, delta_z: float = None) -> None: ...
    def create_stirrup(self, points: Sequence[tuple[float, float] | tuple[tuple[float, float], tuple[float, float]]], diameter: float, material: MatReinforcement, distance: float, shear_check: bool = None, torsion_check: bool = None, mandrel_diameter_factor: float = None, anchorage_length: float = None) -> None: ...
    def create_extreme(self, *, description: str = None, accidental: LoadingULS = None, fatigue: FatigueLoading = None, frequent: LoadingSLS = None, fundamental: LoadingULS = None, characteristic: LoadingSLS = None, quasi_permanent: LoadingSLS = None) -> None: ...

class Beam(Member): ...
class CompressionMember(Member): ...
class OneWaySlab(Member): ...

class Model(_Model):
    def __init__(self, *, project_data: ProjectData = None, code_settings: CodeSettings = None) -> None: ...
    def create_concrete_material(self, base_material: ConcreteMaterial, name: str = None, *, unit_mass: float = 2500, fck: float = None, stone_diameter: float = 0.016, cement_class: ConcCementClass = ..., aggregate_type: ConcAggregateType = ..., diagram_type: ConcDiagramType = ..., silica_fume: bool = False, plain_concrete_diagram: bool = False, dep_params: ConcDependentParams = None) -> MatConcreteEc2: ...
    def create_reinforcement_material(self, base_material: ReinforcementMaterial, name: str = None, *, unit_mass: float = 7850, e_modulus: float = 200000, fyk: float = None, ftk_by_fyk: float = None, epsuk: float = None, type_: ReinfType = ..., bar_surface: BarSurface = ..., class_: ReinfClass = ..., fabrication: ReinfFabrication = ..., diagram_type: ReinfDiagramType = ...) -> MatReinforcementEc2: ...
    def create_beam(self, cs: SectionPrototype1D, material: MatConcrete, *, calculation_control: CalculationSetup = None, name: str = None, rcs_name: str = None, design_member_name: str = None, exposure_classes: ExposureClassesDataEc2 = None, coeff_kx: float = None, creep_coefficient: float = None, relative_humidity: float = None) -> Beam: ...
    def create_compression_member(self, cs: SectionPrototype1D, material: MatConcrete, *, calculation_control: CalculationSetup = None, name: str = None, rcs_name: str = None, design_member_name: str = None, exposure_classes: ExposureClassesDataEc2 = None, coeff_kx: float = None, creep_coefficient: float = None, relative_humidity: float = None) -> CompressionMember: ...
    def create_one_way_slab(self, cs: SectionPrototype1D, material: MatConcrete, *, calculation_control: CalculationSetup = None, name: str = None, rcs_name: str = None, design_member_name: str = None, exposure_classes: ExposureClassesDataEc2 = None, coeff_kx: float = None, creep_coefficient: float = None, relative_humidity: float = None) -> OneWaySlab: ...

class RcsOutputFileParser:
    def __init__(self, xml_file: BinaryIO) -> None: ...
    def section_result(self, id_: int) -> RcsOutputFileParser.SectionResult: ...
    def section_results(self) -> Iterator['RcsOutputFileParser.SectionResult']: ...
    class SectionResult:
        def __init__(self, id_: int, element: ET.Element) -> None: ...
        @property
        def id_(self) -> int: ...
        def extremes(self) -> list[dict]: ...
        def capacity(self) -> list[dict | None]: ...
        def shear(self) -> list[dict | None]: ...
        def torsion(self) -> list[dict | None]: ...
        def interaction(self) -> list[dict | None]: ...
        def crack_width(self) -> list[dict | None]: ...
        def detailing(self) -> list[dict | None]: ...
        def stress_limitation(self) -> list[dict | None]: ...
        def fatigue(self) -> list[dict | None]: ...

class OutputFileParser:
    def __init__(self, xml_file: StringIO) -> None: ...
    @property
    def section_ids(self) -> list[int]: ...
    def raw_results(self) -> dict: ...
    def capacity_results(self, section_id: int) -> list[dict[str, Any] | None]: ...
    def shear_results(self, section_id: int) -> list[dict[str, Any] | None]: ...
    def crack_width_results(self, section_id: int) -> list[dict[str, dict[str, Any] | None] | None]: ...
    def detailing_results(self, section_id: int) -> list[dict[str, float | None] | None]: ...
    def stress_limitation_results(self, section_id: int) -> list[dict[str, float | None] | None]: ...
    def fatigue_results(self, section_id: int) -> list[dict | None]: ...
